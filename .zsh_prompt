# ~/.dotfiles/.zsh_prompt

autoload -Uz vcs_info

# F{1} -- red
# F{2} -- green
# F{3} -- yellow
# F{4} -- blue
# F{5} -- purple

zstyle ':vcs_info:*' stagedstr 'M'
zstyle ':vcs_info:*' unstagedstr 'M' 
zstyle ':vcs_info:*' check-for-changes true
zstyle ':vcs_info:*' actionformats '%b|%a '
zstyle ':vcs_info:*' formats '[%F{4}%b%B%F{2}%c%F{3}%u%f%%b] '
zstyle ':vcs_info:git*+set-message:*' hooks git-untracked
zstyle ':vcs_info:*' enable git 

+vi-git-untracked() {
  if [[ $(git rev-parse --is-inside-work-tree 2> /dev/null) == 'true' ]] && \
  [[ $(git ls-files --other --directory --exclude-standard | sed q | wc -l | tr -d ' ') == 1 ]] ; then
  hook_com[unstaged]+='%F{1}??%f'
fi
}

precmd () { vcs_info }

# Set the default ZSH prompt (fallback from OS)
PROMPT='[zsh] %n@%m %~ ${vcs_info_msg_0_}%B‚ùØ%b '